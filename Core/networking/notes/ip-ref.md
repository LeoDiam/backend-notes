# IP 协议相关技术

Table of Contents
-----------------

* [1. DNS](#1-dns)
   * [1.1 什么是 DNS?](#11-什么是-dns)
   * [1.2 DNS 是如何进行查询的?](#12-dns-是如何进行查询的)
* [2. ARP / RARP](#2-arp--rarp)
   * [2.1 什么是 ARP / RARP?](#21-什么是-arp--rarp)
   * [2.2 ARP 工作流程是怎样的?](#22-arp-工作流程是怎样的)
   * [2.3 为什么 MAC 地址与 IP 地址缺一不可?](#23-为什么-mac-地址与-ip-地址缺一不可)
   * [2.4 ARP 缓存原理是怎样的?](#24-arp-缓存原理是怎样的)
* [3. ICMP](#3-icmp)
   * [3.1 报文格式](#31-报文格式)
   * [3.2 查询 差错](#32-查询-差错)
   * [3.3 两种   五种](#33-两种--五种)


## 1. DNS

### 1.1 什么是 DNS?

维基百科

> 域名系统（英语：Domain Name System，缩写：DNS）是互联网的一项服务。它作为将域名和IP地址相互映射的一个分布式数据库，能够使人更方便地访问互联网。DNS使用TCP和UDP端口53



举个例子，身份证号是每个人唯一的标识，但为了更好地日常沟通与交流，我们也有自己的名字

`DNS` 是一项服务，让我们可以直接通过主机名（名字）访问某个特定的网址（身份证号）





<div align="center"> <img src="image-20201009160554864.png" width="60%"/> </div><br>

### 1.2 DNS 是如何进行查询的?

<div align="center"> <img src="image-20201009161225037.png" width="65%"/> </div><br>

该图中，不仅可以访问同一域名中的域名服务器，还可以访问其他域的域名服务器

## 2. ARP / RARP 

### 2.1 什么是 ARP / RARP?

发送主机和目标主机有着各自的 `IP` 地址，但底层数据链路层中，实际通信需要知道每个 `IP` 地址对应的 `MAC` 地址，`ARP` 协议就是为解决此问题而生的

`ARP` 只适用于 `IPv4`



### 2.2 ARP 工作流程是怎样的?

<div align="center"> <img src="image-20201010095809297.png" width="60%"/> </div><br>



主机 A（发送主机）为了获得主机 B （目标主机）的 `MAC` 地址，要通过广播发送一个 `ARP` 请求包（该请求包会被这同一个链路上所有的主机和路由器进行解析）

如果 `ARP` 请求包中的目标 `IP` 地址与自己的 `IP` 地址一致，**那么这个节点就将自己的 MAC 地址塞入 ARP 相应包返回给主机 A**



根据 `ARP` 可以动态进行地址解析






### 2.3 为什么 MAC 地址与 IP 地址缺一不可?











### 2.4 ARP 缓存原理是怎样的?

广播是一件较浪费网络流量的行为，因此，我们将获取到的 `MAC` 地址缓存一段时间，即把第一次通过 `ARP` 获取到的 `MAC` 地址作为 `IP` 对 `MAC` 的映射关系记忆到一个 `ARP` 缓存表中





## 3. ICMP







### 3.1 报文格式





### 3.2 查询 差错





### 3.3 两种 + 五种
















